<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mental Well-Being of College Students</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: linear-gradient(135deg, #f0f4ff, #f9faff);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #333;
      transition: background 0.5s, color 0.5s;
    }

    body.dark {
      background: #121212;
      color: #f5f5f5;
    }

    .hidden {
      display: none;
    }

    .auth-container,
    .dashboard {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(8px);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 500px;
      text-align: center;
      animation: fadeIn 1s ease;
      transition: background 0.5s, color 0.5s;
    }

    body.dark .auth-container,
    body.dark .dashboard {
      background: rgba(30, 30, 30, 0.9);
      color: #f5f5f5;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #4e54c8, #8f94fb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    h2 {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #4e54c8, #8f94fb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .auth-container input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    .auth-container button,
    .btn {
      padding: 12px 25px;
      margin: 5px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #4e54c8, #8f94fb);
      color: #fff;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: 0.3s;
    }

    .auth-container button:hover,
    .btn:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, #3d43b0, #767df0);
    }

    .switch-link {
      margin-top: 10px;
      cursor: pointer;
      color: #4e54c8;
      display: inline-block;
      font-size: 0.9rem;
    }

    .dashboard {
      max-width: 1100px;
    }

    .quote-box,
    .mood-tracker,
    .chart-section,
    .history-section,
    .chatbot,
    .tips,
    .goals,
    .help-section {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(8px);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
      margin: 20px 0;
      text-align: center;
      width: 100%;
      transition: transform .3s, box-shadow .3s;
    }

    .quote-box:hover,
    .mood-tracker:hover,
    .chart-section:hover,
    .history-section:hover,
    .chatbot:hover,
    .tips:hover,
    .goals:hover,
    .help-section:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    body.dark .quote-box,
    body.dark .mood-tracker,
    body.dark .chart-section,
    body.dark .history-section,
    body.dark .chatbot,
    body.dark .tips,
    body.dark .goals,
    body.dark .help-section {
      background: rgba(30, 30, 30, 0.9);
    }

    .emojis {
      font-size: 2rem;
      cursor: pointer;
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }

    .emojis span {
      transition: transform 0.2s;
    }

    .emojis span:hover {
      transform: scale(1.3);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th,
    td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
    }

    th {
      background: #4e54c8;
      color: white;
    }

    body.dark th {
      background: #444;
    }

    .goal-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0;
      background: rgba(0, 0, 0, 0.03);
      padding: 8px 12px;
      border-radius: 8px;
    }

    .chat-window {
      height: 200px;
      overflow-y: auto;
      border-bottom: 1px solid #ccc;
      margin-bottom: 10px;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .message {
      margin: 4px 0;
      padding: 10px;
      border-radius: 12px;
      max-width: 70%;
      font-size: 0.95rem;
    }

    .user {
      background: #a1c4fd;
      align-self: flex-end;
    }

    .bot {
      background: #c2e9fb;
      align-self: flex-start;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }
  </style>
</head>

<body>

  <!-- Authentication -->
  <div class="auth-container" id="auth-container">
    <h1>Welcome</h1>
    <p>Please login or sign up</p>

    <div id="login-form">
      <input type="text" id="login-username" placeholder="Username" />
      <input type="password" id="login-password" placeholder="Password" />
      <button onclick="login()">Login</button>
      <p class="switch-link" onclick="showSignup()">Don't have an account? Sign up</p>
    </div>

    <div id="signup-form" class="hidden">
      <input type="text" id="signup-username" placeholder="Choose username" />
      <input type="password" id="signup-password" placeholder="Choose password" />
      <button onclick="signup()">Sign Up</button>
      <p class="switch-link" onclick="showLogin()">Already have an account? Login</p>
    </div>
  </div>

  <!-- Dashboard -->
  <div class="dashboard hidden" id="dashboard">
    <h1>üå∏ Mental Well-Being Dashboard üå∏</h1>
    <button class="btn" onclick="toggleTheme()">üåô Toggle Theme</button>
    <button class="btn" onclick="logout()">üö™ Logout</button>
    <p id="welcome-user"></p>

    <div class="quote-box">
      <p class="quote">Loading...</p>
    </div>
    <div class="tips">
      <h2>üí° Daily Wellness Tip</h2>
      <p id="tip-text"></p>
    </div>

    <div class="mood-tracker">
      <h2>How are you feeling?</h2>
      <div class="emojis">
        <span onclick="selectMood('üòä')">üòä</span>
        <span onclick="selectMood('üòî')">üòî</span>
        <span onclick="selectMood('üò°')">üò°</span>
        <span onclick="selectMood('üò¥')">üò¥</span>
        <span onclick="selectMood('ü§©')">ü§©</span>
      </div>
      <p id="mood-result"></p>
    </div>

    <div class="chart-section">
      <h2>üìä Stress vs Relaxation</h2>
      <canvas id="stressChart"></canvas>
    </div>

    <div class="history-section">
      <h2>üìù Mood History</h2>
      <button class="btn" onclick="exportCSV()">‚¨á Download CSV</button>
      <table id="mood-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Mood</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Improved Goal Input -->
    <div class="goals">
      <h2>üéØ My Daily Goals</h2>
      <div style="display:flex; gap:10px; margin-bottom:10px;">
        <input type="text" id="goal-input" placeholder="Enter a goal..."
          style="flex:1; padding:12px; border-radius:12px; border:1px solid #ccc; box-shadow:0 2px 5px rgba(0,0,0,0.1); font-size:1rem;" />
        <button class="btn" onclick="addGoal()" style="flex:none;">Add Goal</button>
      </div>
      <div id="goal-list"></div>
    </div>

    <div class="tips">
      <h2>üé∂ Relaxing Music</h2>
      <button class="btn" onclick="playMusic()">‚ñ∂ Play</button>
      <button class="btn" onclick="pauseMusic()">‚è∏ Pause</button>
    </div>

    <div class="help-section">
      <h2>üìû Emergency Help</h2>
      <p>If you're feeling very low, reach out:</p>
      <p>College Counselor: <b>+91-9876543210</b></p>
      <p>National Helpline: <b>1800-599-0019</b></p>
    </div>

    <!-- Improved Chatbot -->
    <div class="chatbot">
      <div class="chat-window" id="chat-window">
        <div class="message bot">Hi üëã I'm your wellness buddy. How are you?</div>
      </div>
      <div style="display:flex; gap:10px; margin-top:10px;">
        <input type="text" id="user-input" placeholder="Type a message..."
          onkeypress="if(event.key==='Enter') sendMessage()"
          style="flex:1; padding:12px; border-radius:12px; border:1px solid #ccc; box-shadow:0 2px 5px rgba(0,0,0,0.1); font-size:1rem;" />
        <button class="btn" onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <script>
    let currentUser = null, chart = null, music = new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");

    function showSignup() { document.getElementById("login-form").classList.add("hidden"); document.getElementById("signup-form").classList.remove("hidden"); }
    function showLogin() { document.getElementById("signup-form").classList.add("hidden"); document.getElementById("login-form").classList.remove("hidden"); }

    function signup() {
      let u = document.getElementById("signup-username").value, p = document.getElementById("signup-password").value;
      if (u && p) { localStorage.setItem(u, JSON.stringify({ password: p, moods: [], goals: [] })); alert("Signup successful!"); showLogin(); } else alert("Fill all fields");
    }
    function login() {
      let u = document.getElementById("login-username").value, p = document.getElementById("login-password").value, data = localStorage.getItem(u);
      if (data) { let user = JSON.parse(data); if (user.password === p) { currentUser = u; document.getElementById("auth-container").classList.add("hidden"); document.getElementById("dashboard").classList.remove("hidden"); document.getElementById("welcome-user").innerText = "Welcome, " + u + " üåº"; loadChart(user.moods); loadMoodTable(user.moods); loadGoals(user.goals); } else alert("Wrong password"); } else alert("User not found");
    }
    function logout() { currentUser = null; document.getElementById("dashboard").classList.add("hidden"); document.getElementById("auth-container").classList.remove("hidden"); }

    const quotes = ["Believe in yourself üåü", "Every day has something good üíô", "Your mental health is priority üåà", "Breathe, you're okay üåª", "Small steps count üå±"];
    let qi = 0; setInterval(() => { document.querySelector(".quote").innerText = quotes[qi]; qi = (qi + 1) % quotes.length; }, 4000);

    const tips = ["Drink 8 glasses of water üíß", "Take a 10-min walk üö∂", "Stretch for 5 minutes üßò", "Sleep 7-8 hours üò¥", "Write 3 good things today ‚ú®"];
    document.getElementById("tip-text").innerText = tips[Math.floor(Math.random() * tips.length)];

    function selectMood(m) { document.getElementById("mood-result").innerText = "You selected: " + m; let user = JSON.parse(localStorage.getItem(currentUser)); user.moods.push({ mood: m, date: new Date().toDateString() }); localStorage.setItem(currentUser, JSON.stringify(user)); loadChart(user.moods); loadMoodTable(user.moods); }

    function loadChart(history) { const days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]; let stress = [0, 0, 0, 0, 0, 0, 0], relax = [0, 0, 0, 0, 0, 0, 0]; history.forEach(e => { let d = new Date(e.date).getDay(), s = 0, r = 0; if (e.mood == "üòä" || e.mood == "ü§©") r = 2; if (e.mood == "üòî" || e.mood == "üò°") s = 2; if (e.mood == "üò¥") { s = 1; r = 1; } if (d === 0) { stress[6] += s; relax[6] += r; } else { stress[d - 1] += s; relax[d - 1] += r; } }); if (chart) chart.destroy(); chart = new Chart(document.getElementById("stressChart"), { type: "line", data: { labels: days, datasets: [{ label: "Stress", data: stress, borderColor: "#e74c3c", backgroundColor: "rgba(231,76,60,0.2)", fill: true }, { label: "Relaxation", data: relax, borderColor: "#2ecc71", backgroundColor: "rgba(46,204,113,0.2)", fill: true }] }, options: { scales: { y: { beginAtZero: true, max: 10 } } } }); }

    function loadMoodTable(history) { let tb = document.querySelector("#mood-table tbody"); tb.innerHTML = ""; history.slice().reverse().forEach(e => { tb.innerHTML += <tr><td>${e.date}</td><td>${e.mood}</td></tr>; }); }
    function exportCSV() { let user = JSON.parse(localStorage.getItem(currentUser)); let rows = [["Date", "Mood"], ...user.moods.map(m => [m.date, m.mood])]; let blob = new Blob([rows.map(r => r.join(",")).join("\n")], { type: "text/csv" }); let a = document.createElement("a"); a.href = URL.createObjectURL(blob); a.download = "mood_history.csv"; a.click(); }

    function addGoal() { let g = document.getElementById("goal-input").value; if (!g) return; let user = JSON.parse(localStorage.getItem(currentUser)); user.goals.push({ task: g, done: false }); localStorage.setItem(currentUser, JSON.stringify(user)); loadGoals(user.goals); document.getElementById("goal-input").value = ""; }
    function loadGoals(goals) { let list = document.getElementById("goal-list"); list.innerHTML = ""; goals.forEach((g, i) => { list.innerHTML += <div class="goal-item"><input type="checkbox" ${g.done ? "checked" : ""} onchange="toggleGoal(${i})">${g.task}</div>; }); }
    function toggleGoal(i) { let user = JSON.parse(localStorage.getItem(currentUser)); user.goals[i].done = !user.goals[i].done; localStorage.setItem(currentUser, JSON.stringify(user)); loadGoals(user.goals); }

    function playMusic() { music.play(); }
    function pauseMusic() { music.pause(); }
    function toggleTheme() { document.body.classList.toggle("dark"); }

    // Chatbot database & functions
    if (!localStorage.getItem("chatDB")) {
      localStorage.setItem("chatDB", JSON.stringify([
        { keywords: ["sad", "down", "unhappy"], responses: ["I'm sorry you're feeling down üíô. Try taking a deep breath or a short walk. üåø", "Remember, it's okay to feel sad sometimes. üíõ"] },
        { keywords: ["happy", "good", "great"], responses: ["Yay! I'm glad you're happy üòÑ!", "Keep smiling! üòä"] },
        { keywords: ["exam", "study", "stress"], responses: ["Exams can be stressful. Take short breaks üå∏", "Remember to stay calm and breathe. You got this! üí™"] },
        { keywords: ["tired", "sleep"], responses: ["Make sure to rest well üò¥", "A short nap can boost your energy üåû"] },
        { keywords: ["angry", "mad", "upset"], responses: ["Take a deep breath üå¨, anger won't solve it.", "Try to relax and let it go üòå"] },
        { keywords: ["default"], responses: ["I hear you üå∏", "Tell me more about it", "Thanks for sharing!"] },
      ]));
    }

    function sendMessage() {
      let input = document.getElementById("user-input"), text = input.value.trim();
      if (!text) return;
      addMsg(text, "user");

      let db = JSON.parse(localStorage.getItem("chatDB"));
      let response = db.find(cat => cat.keywords.some(k => text.toLowerCase().includes(k)))?.responses;
      if (!response) response = db.find(cat => cat.keywords.includes("default")).responses;

      setTimeout(() => addMsg(response[Math.floor(Math.random() * response.length)], "bot"), 500);
      input.value = "";
    }

    function addMsg(t, s) {
      let w = document.getElementById("chat-window");
      let d = document.createElement("div");
      d.className = "message " + s;
      d.innerText = t;
      w.appendChild(d);
      w.scrollTop = w.scrollHeight;
    }
  </script>
</body>

</html>